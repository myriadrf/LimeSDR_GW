FLASH
=====

Register Listing for FLASH
--------------------------

+------------------------------------------------+----------------------------------------+
| Register                                       | Address                                |
+================================================+========================================+
| :ref:`FLASH_SPI_CONTROL <FLASH_SPI_CONTROL>`   | :ref:`0xf0007800 <FLASH_SPI_CONTROL>`  |
+------------------------------------------------+----------------------------------------+
| :ref:`FLASH_SPI_STATUS <FLASH_SPI_STATUS>`     | :ref:`0xf0007804 <FLASH_SPI_STATUS>`   |
+------------------------------------------------+----------------------------------------+
| :ref:`FLASH_SPI_MOSI1 <FLASH_SPI_MOSI1>`       | :ref:`0xf0007808 <FLASH_SPI_MOSI1>`    |
+------------------------------------------------+----------------------------------------+
| :ref:`FLASH_SPI_MOSI0 <FLASH_SPI_MOSI0>`       | :ref:`0xf000780c <FLASH_SPI_MOSI0>`    |
+------------------------------------------------+----------------------------------------+
| :ref:`FLASH_SPI_MISO1 <FLASH_SPI_MISO1>`       | :ref:`0xf0007810 <FLASH_SPI_MISO1>`    |
+------------------------------------------------+----------------------------------------+
| :ref:`FLASH_SPI_MISO0 <FLASH_SPI_MISO0>`       | :ref:`0xf0007814 <FLASH_SPI_MISO0>`    |
+------------------------------------------------+----------------------------------------+
| :ref:`FLASH_SPI_CS <FLASH_SPI_CS>`             | :ref:`0xf0007818 <FLASH_SPI_CS>`       |
+------------------------------------------------+----------------------------------------+
| :ref:`FLASH_SPI_LOOPBACK <FLASH_SPI_LOOPBACK>` | :ref:`0xf000781c <FLASH_SPI_LOOPBACK>` |
+------------------------------------------------+----------------------------------------+

FLASH_SPI_CONTROL
^^^^^^^^^^^^^^^^^

`Address: 0xf0007800 + 0x0 = 0xf0007800`

    SPI Control.

    .. wavedrom::
        :caption: FLASH_SPI_CONTROL

        {
            "reg": [
                {"name": "start",  "type": 4, "bits": 1},
                {"bits": 7},
                {"name": "length",  "bits": 8},
                {"bits": 16}
            ], "config": {"hspace": 400, "bits": 32, "lanes": 4 }, "options": {"hspace": 400, "bits": 32, "lanes": 4}
        }


+--------+--------+---------------------------------------------+
| Field  | Name   | Description                                 |
+========+========+=============================================+
| [0]    | START  | SPI Xfer Start (Write ``1`` to start Xfer). |
+--------+--------+---------------------------------------------+
| [15:8] | LENGTH | SPI Xfer Length (in bits).                  |
+--------+--------+---------------------------------------------+

FLASH_SPI_STATUS
^^^^^^^^^^^^^^^^

`Address: 0xf0007800 + 0x4 = 0xf0007804`

    SPI Status.

    .. wavedrom::
        :caption: FLASH_SPI_STATUS

        {
            "reg": [
                {"name": "done",  "bits": 1},
                {"name": "mode",  "bits": 1},
                {"bits": 30}
            ], "config": {"hspace": 400, "bits": 32, "lanes": 4 }, "options": {"hspace": 400, "bits": 32, "lanes": 4}
        }


+-------+------+---------------------------------------------------------------------+
| Field | Name | Description                                                         |
+=======+======+=====================================================================+
| [0]   | DONE | SPI Xfer Done (when read as ``1``).                                 |
+-------+------+---------------------------------------------------------------------+
| [1]   | MODE | SPI mode                                                            |
|       |      |                                                                     |
|       |      | +---------+-------------------------------------------------------+ |
|       |      | | Value   | Description                                           | |
|       |      | +=========+=======================================================+ |
|       |      | | ``0b0`` | Raw    : MOSI transfers aligned on core's data-width. | |
|       |      | +---------+-------------------------------------------------------+ |
|       |      | | ``0b1`` | Aligned: MOSI transfers aligned on transfers' length. | |
|       |      | +---------+-------------------------------------------------------+ |
+-------+------+---------------------------------------------------------------------+

FLASH_SPI_MOSI1
^^^^^^^^^^^^^^^

`Address: 0xf0007800 + 0x8 = 0xf0007808`

    Bits 32-39 of `FLASH_SPI_MOSI`. SPI MOSI data (MSB-first serialization).

    .. wavedrom::
        :caption: FLASH_SPI_MOSI1

        {
            "reg": [
                {"name": "spi_mosi[63:32]", "bits": 32}
            ], "config": {"hspace": 400, "bits": 32, "lanes": 1 }, "options": {"hspace": 400, "bits": 32, "lanes": 1}
        }


FLASH_SPI_MOSI0
^^^^^^^^^^^^^^^

`Address: 0xf0007800 + 0xc = 0xf000780c`

    Bits 0-31 of `FLASH_SPI_MOSI`.

    .. wavedrom::
        :caption: FLASH_SPI_MOSI0

        {
            "reg": [
                {"name": "spi_mosi[31:0]", "bits": 32}
            ], "config": {"hspace": 400, "bits": 32, "lanes": 1 }, "options": {"hspace": 400, "bits": 32, "lanes": 1}
        }


FLASH_SPI_MISO1
^^^^^^^^^^^^^^^

`Address: 0xf0007800 + 0x10 = 0xf0007810`

    Bits 32-39 of `FLASH_SPI_MISO`. SPI MISO data (MSB-first de-serialization).

    .. wavedrom::
        :caption: FLASH_SPI_MISO1

        {
            "reg": [
                {"name": "spi_miso[63:32]", "bits": 32}
            ], "config": {"hspace": 400, "bits": 32, "lanes": 1 }, "options": {"hspace": 400, "bits": 32, "lanes": 1}
        }


FLASH_SPI_MISO0
^^^^^^^^^^^^^^^

`Address: 0xf0007800 + 0x14 = 0xf0007814`

    Bits 0-31 of `FLASH_SPI_MISO`.

    .. wavedrom::
        :caption: FLASH_SPI_MISO0

        {
            "reg": [
                {"name": "spi_miso[31:0]", "bits": 32}
            ], "config": {"hspace": 400, "bits": 32, "lanes": 1 }, "options": {"hspace": 400, "bits": 32, "lanes": 1}
        }


FLASH_SPI_CS
^^^^^^^^^^^^

`Address: 0xf0007800 + 0x18 = 0xf0007818`

    SPI CS Chip-Select and Mode.

    .. wavedrom::
        :caption: FLASH_SPI_CS

        {
            "reg": [
                {"name": "sel",  "attr": '1', "bits": 1},
                {"bits": 15},
                {"name": "mode",  "bits": 1},
                {"bits": 15}
            ], "config": {"hspace": 400, "bits": 32, "lanes": 4 }, "options": {"hspace": 400, "bits": 32, "lanes": 4}
        }


+-------+------+-----------------------------------------------------------------------------------------------------------+
| Field | Name | Description                                                                                               |
+=======+======+===========================================================================================================+
| [0]   | SEL  |                                                                                                           |
|       |      |                                                                                                           |
|       |      | +--------------+-----------------------------------+                                                      |
|       |      | | Value        | Description                       |                                                      |
|       |      | +==============+===================================+                                                      |
|       |      | | ``0b0..001`` | Chip ``0`` selected for SPI Xfer. |                                                      |
|       |      | +--------------+-----------------------------------+                                                      |
|       |      | | ``0b1..000`` | Chip ``N`` selected for SPI Xfer. |                                                      |
|       |      | +--------------+-----------------------------------+                                                      |
+-------+------+-----------------------------------------------------------------------------------------------------------+
| [16]  | MODE |                                                                                                           |
|       |      |                                                                                                           |
|       |      | +---------+---------------------------------------------------------------------------------------------+ |
|       |      | | Value   | Description                                                                                 | |
|       |      | +=========+=============================================================================================+ |
|       |      | | ``0b0`` | Normal operation (CS handled by Core).                                                      | |
|       |      | +---------+---------------------------------------------------------------------------------------------+ |
|       |      | | ``0b1`` | Manual operation (CS handled by User, direct recopy of ``sel``), useful for Bulk transfers. | |
|       |      | +---------+---------------------------------------------------------------------------------------------+ |
+-------+------+-----------------------------------------------------------------------------------------------------------+

FLASH_SPI_LOOPBACK
^^^^^^^^^^^^^^^^^^

`Address: 0xf0007800 + 0x1c = 0xf000781c`

    SPI Loopback Mode.

    .. wavedrom::
        :caption: FLASH_SPI_LOOPBACK

        {
            "reg": [
                {"name": "mode",  "bits": 1},
                {"bits": 31}
            ], "config": {"hspace": 400, "bits": 32, "lanes": 4 }, "options": {"hspace": 400, "bits": 32, "lanes": 4}
        }


+-------+------+--------------------------------------------------+
| Field | Name | Description                                      |
+=======+======+==================================================+
| [0]   | MODE |                                                  |
|       |      |                                                  |
|       |      | +---------+------------------------------------+ |
|       |      | | Value   | Description                        | |
|       |      | +=========+====================================+ |
|       |      | | ``0b0`` | Normal operation.                  | |
|       |      | +---------+------------------------------------+ |
|       |      | | ``0b1`` | Loopback operation (MOSI to MISO). | |
|       |      | +---------+------------------------------------+ |
+-------+------+--------------------------------------------------+

